  2. **OS Linux - Souborový sytém, formátování, dělení a připojování souborových systémů, účel základních adresářů**

OS Linux – souborový systém, formátování, dělení a připojování souborových systémů, účel základních adresářů

**Souborový systém v Linuxu**

Souborový systém (filesystem) je způsob, jakým operační systém organizuje a ukládá data na úložné zařízení (HDD, SSD, USB, NVMe). Linux používá hierarchický stromový model – vše začíná kořenovým adresářem „/“ (root).

Základní vlastnosti linuxového souborového systému (podle koncepce probírané v NDG Linux / Cisco Networking Academy):

* Vše je reprezentováno jako soubor (files, zařízení, procesní informace).
* Struktura je jednotná bez ohledu na počet disků.
* Každý soubor má:

  * inode (obsahuje metadata – vlastník, práva, velikost, časové značky)
  * datové bloky (skutečný obsah souboru)

Typy souborů v Linuxu:

* běžný soubor (-)
* adresář (d)
* symbolický odkaz (l)
* blokové zařízení (b)
* znakové zařízení (c)
* socket (s)
* FIFO / pipe (p)

Nejpoužívanější souborové systémy v Linuxu:

* ext4 (nejběžnější, journaling, spolehlivý)
* xfs (často na serverech, vysoký výkon)
* btrfs (moderní, snapshoty)
* vfat / exfat (kompatibilita s Windows)

Journaling znamená, že systém si vede záznam změn před jejich provedením, což zvyšuje odolnost proti poškození při výpadku napájení.

**Dělení disku (partitioning)**

Než lze vytvořit souborový systém, disk se obvykle rozdělí na oddíly (partitions). Oddíl je logická část fyzického disku.

Tabulky oddílů:

1. MBR (Master Boot Record)

   * starší typ
   * maximálně 4 primární oddíly
   * velikost disku do 2 TB

2. GPT (GUID Partition Table)

   * moderní standard
   * podpora velkých disků (>2 TB)
   * prakticky neomezený počet oddílů
   * používá se s UEFI

Nástroje pro práci s oddíly:

* fdisk (MBR)
* gdisk (GPT)
* parted
* lsblk (zobrazení disků a oddílů)

Příklad zobrazení disků:
lsblk

Oddíly jsou označeny například:
/dev/sda
/dev/sda1
/dev/nvme0n1p1

**Formátování souborového systému**

Formátování znamená vytvoření konkrétního souborového systému na oddílu.

Příkaz:
mkfs

Například:
mkfs.ext4 /dev/sda1

Tím se vytvoří souborový systém ext4 na oddílu sda1.

Další příklady:
mkfs.xfs /dev/sdb1
mkfs.vfat /dev/sdc1

Při formátování se vytvoří:

* struktura inodů
* datové bloky
* superblok (obsahuje informace o souborovém systému)

**Připojování (mounting) souborových systémů**

Linux používá jednotný adresářový strom. Každý disk nebo oddíl musí být „připojen“ (mounted) do určitého adresáře, aby byl přístupný.

Příkaz:
mount

Například:
mount /dev/sda1 /mnt

To znamená, že obsah oddílu sda1 bude dostupný v adresáři /mnt.

Odpojení:
umount /mnt

Automatické připojování při startu systému se nastavuje v souboru:
/etc/fstab

Formát záznamu v /etc/fstab:
zařízení  přípojný_bod  typ_fs  volby  dump  fsck

Příklad:
/dev/sda1  /home  ext4  defaults  0  2

Virtuální souborové systémy:

* /proc (informace o procesech a jádru)
* /sys (informace o zařízeních)
* tmpfs (dočasný systém v RAM)

**Účel základních adresářů (FHS – Filesystem Hierarchy Standard)**

Linux dodržuje standard FHS, který určuje strukturu adresářů.

/
Kořen systému. Všechny ostatní adresáře jsou pod ním.

/bin
Základní příkazy potřebné pro běh systému (ls, cp, mv, cat).

/sbin
Systémové nástroje určené pro administrátora (fsck, mount, reboot).

/boot
Soubory potřebné pro start systému (kernel, initramfs, GRUB).

/dev
Soubory reprezentující zařízení (např. /dev/sda).

/etc
Konfigurační soubory systému.

/home
Domovské adresáře uživatelů.

/root
Domovský adresář uživatele root.

/lib, /lib64
Sdílené knihovny potřebné pro běh programů v /bin a /sbin.

/usr
Uživatelské aplikace a knihovny.

* /usr/bin
* /usr/sbin
* /usr/lib

/var
Proměnná data (logy, cache, databáze).

* /var/log
* /var/spool

/tmp
Dočasné soubory.

/mnt
Dočasné připojení disků administrátorem.

/media
Automatické připojení externích médií (USB).

/opt
Volitelný software třetích stran.

/proc
Virtuální systém s informacemi o běžících procesech.

/sys
Informace o hardwaru a jádru.

Shrnutí

Linux používá hierarchický souborový systém začínající v kořeni „/“. Disk se nejprve rozdělí na oddíly (MBR/GPT), poté se na oddíl vytvoří souborový systém (např. ext4) pomocí mkfs. Aby byl oddíl přístupný, musí být připojen pomocí mount do určitého adresáře. Struktura adresářů je definována standardem FHS, který zajišťuje jednotnost mezi distribucemi Linuxu.
